[gd_scene load_steps=30 format=3 uid="uid://dsinasa0vu1ih"]

[ext_resource type="PackedScene" uid="uid://bb1q2uf2llpgk" path="res://common/level.blend" id="1_w1tfj"]
[ext_resource type="PackedScene" uid="uid://2oxdgu03lnbk" path="res://kinematic_fps_controller/kinematic_fps_controller.tscn" id="2_iewf8"]
[ext_resource type="Script" path="res://common/custom_directional_light_3d.gd" id="3_miluk"]
[ext_resource type="PackedScene" uid="uid://dvfhbivhdrs8c" path="res://common/enemy.tscn" id="4_yfrhx"]
[ext_resource type="PackedScene" uid="uid://b852bxp0rxosv" path="res://common/debug_arrow.tscn" id="5_7b3n7"]

[sub_resource type="NavigationMesh" id="NavigationMesh_82lw1"]
vertices = PackedVector3Array(-49.7, 0.37828, -7.35, -17.6, 0.37828, -7.35, -17.55, 0.37828, -7.85, -17.35, 0.37828, -8, -16.95, 0.37828, -49.7, -49.7, 0.37828, -49.7, -16.95, 0.37828, -8, -7.65, 0.37828, -8, -7.65, 0.37828, -49.7, -7.15, 0.37828, -7.95, -7, 0.37828, -7.75, 49.7, 0.37828, -7.35, 49.7, 0.37828, -49.7, -7, 0.37828, -7.35, -17, 3.37828, -7.65, -17, 3.37828, 5.55, -7.6, 3.37828, 5.55, -7.6, 3.37828, -7.65, -49.7, 0.37828, 5.45, -17.6, 0.37828, 5.45, -7, 0.37828, -1.6, 49.7, 0.37828, -1.6, -15.75, 0.37828, -3.2, -15.45, 0.37828, -3.2, -15.45, 0.37828, -3.45, -15.75, 0.37828, -3.45, -16.55, 0.37828, -3.7, -15.9, 0.37828, -3.65, -15.2, 0.37828, -3.7, -16.55, 0.37828, -6.95, -11.2, 0.37828, -3.7, -11.2, 0.37828, -6.95, -9.6, 0.37828, -2.15, -9.35, 0.37828, -2.15, -9.3, 0.37828, -2.45, -9.7, 0.37828, -2.45, -9.95, 0.37828, -3.85, -9.7, 0.37828, -3.6, -8.15, 0.37828, -2.6, -8.15, 0.37828, -6.95, -10.25, 0.37828, -6.95, -9.1, 0.37828, -2.6, -10.25, 0.37828, -3.85, -15.45, 0.37828, -2.95, -15.75, 0.37828, -2.95, -15.2, 0.37828, -2.7, -15.9, 0.37828, -2.75, -16.55, 0.37828, -2.7, -15.75, 0.37828, 1.65, -15.45, 0.37828, 1.65, -15.4, 0.37828, 1.4, -15.8, 0.37828, 1.4, -15.2, 0.37828, 1.25, -11.4, 0.37828, 1.25, -11.4, 0.37828, -0.0999985, -16, 0.37828, 1.25, -11.4, 0.37828, -1.6, -11.4, 0.37828, -2.7, -16.55, 0.37828, 1.25, -11.15, 0.37828, -0.349998, -10.85, 0.37828, -0.349998, -10.85, 0.37828, -1.35, -11.15, 0.37828, -1.35, -9.35, 0.37828, -1.9, -9.6, 0.37828, -1.9, -8.1, 0.37828, 0.549999, -7.9, 0.37828, 0.400002, -7.9, 0.37828, -0.950001, -9.2, 0.37828, -1.7, -10.25, 0.37828, -0.0999985, -10.25, 0.37828, 1.05, -9.75, 0.37828, -1.7, -7.55, 0.37828, 0.400002, -7.55, 0.37828, -0.950001, -10.25, 0.37828, -1.65, -10.5, 0.37828, -1.35, -10.5, 0.37828, -0.349998, -8.1, 0.37828, -1.1, -8.15, 0.37828, -1.65, -8.15, 0.37828, 1.05, -7.25, 0.37828, -0.950001, -7.25, 0.37828, 0.400002, -7.05, 0.37828, -1.1, -7.05, 0.37828, 0.549999, -7, 0.37828, 1.05, 49.7, 0.37828, 1.05, -10.2, 0.37828, 2.85, -10, 0.37828, 2.85, -9.95, 0.37828, 2.6, -9.75, 0.37828, 2.45, -8.15, 0.37828, 2.45, -7, 0.37828, 5.45, 49.7, 0.37828, 5.45, -15.75, 0.37828, 1.85, -15.4, 0.37828, 1.9, -15.2, 0.37828, 2.05, -15.9, 0.37828, 2.05, -16.55, 0.37828, 2.1, -16.55, 0.37828, 5.05, -11.4, 0.37828, 5.05, -11.4, 0.37828, 2.05, -9.95, 0.37828, 3.1, -10.25, 0.37828, 5.05, -8.15, 0.37828, 5.05, -8.15, 0.37828, 3.25, -9.75, 0.37828, 3.25, -17.55, 0.37828, 5.95, -17.35, 0.37828, 6.1, -49.7, 0.37828, 49.7, -16.95, 0.37828, 49.7, -16.95, 0.37828, 6.1, -7.15, 0.37828, 6.05, -7.65, 0.37828, 6.1, -7.65, 0.37828, 49.7, -7, 0.37828, 5.85, 49.7, 0.37828, 49.7)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 5), PackedInt32Array(3, 5, 4), PackedInt32Array(4, 6, 3), PackedInt32Array(4, 8, 6), PackedInt32Array(6, 8, 7), PackedInt32Array(9, 7, 8), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 12), PackedInt32Array(10, 12, 11), PackedInt32Array(11, 13, 10), PackedInt32Array(17, 16, 14), PackedInt32Array(14, 16, 15), PackedInt32Array(0, 1, 18), PackedInt32Array(18, 1, 19), PackedInt32Array(13, 11, 20), PackedInt32Array(20, 11, 21), PackedInt32Array(25, 24, 22), PackedInt32Array(22, 24, 23), PackedInt32Array(27, 26, 28), PackedInt32Array(28, 26, 29), PackedInt32Array(25, 27, 24), PackedInt32Array(24, 27, 28), PackedInt32Array(30, 28, 31), PackedInt32Array(31, 28, 29), PackedInt32Array(33, 32, 34), PackedInt32Array(34, 32, 35), PackedInt32Array(37, 36, 38), PackedInt32Array(38, 36, 39), PackedInt32Array(39, 36, 40), PackedInt32Array(34, 35, 41), PackedInt32Array(41, 35, 37), PackedInt32Array(36, 42, 40), PackedInt32Array(38, 41, 37), PackedInt32Array(44, 22, 43), PackedInt32Array(43, 22, 23), PackedInt32Array(47, 46, 45), PackedInt32Array(48, 51, 49), PackedInt32Array(49, 51, 50), PackedInt32Array(54, 53, 52), PackedInt32Array(44, 43, 46), PackedInt32Array(46, 43, 45), PackedInt32Array(50, 51, 52), PackedInt32Array(52, 51, 55), PackedInt32Array(45, 57, 56), PackedInt32Array(55, 58, 47), PackedInt32Array(62, 61, 59), PackedInt32Array(59, 61, 60), PackedInt32Array(55, 47, 52), PackedInt32Array(52, 47, 45), PackedInt32Array(52, 45, 54), PackedInt32Array(54, 45, 56), PackedInt32Array(59, 54, 62), PackedInt32Array(62, 54, 56), PackedInt32Array(64, 32, 63), PackedInt32Array(63, 32, 33), PackedInt32Array(66, 65, 67), PackedInt32Array(67, 65, 68), PackedInt32Array(68, 65, 69), PackedInt32Array(69, 65, 70), PackedInt32Array(63, 68, 64), PackedInt32Array(64, 68, 71), PackedInt32Array(67, 73, 66), PackedInt32Array(66, 73, 72), PackedInt32Array(74, 71, 75), PackedInt32Array(75, 71, 68), PackedInt32Array(75, 68, 76), PackedInt32Array(76, 68, 69), PackedInt32Array(75, 76, 61), PackedInt32Array(61, 76, 60), PackedInt32Array(68, 77, 67), PackedInt32Array(68, 78, 77), PackedInt32Array(65, 79, 70), PackedInt32Array(81, 72, 80), PackedInt32Array(80, 72, 73), PackedInt32Array(82, 20, 83), PackedInt32Array(83, 20, 84), PackedInt32Array(84, 20, 21), PackedInt32Array(84, 21, 85), PackedInt32Array(80, 82, 81), PackedInt32Array(81, 82, 83), PackedInt32Array(87, 86, 88), PackedInt32Array(88, 86, 70), PackedInt32Array(90, 89, 79), PackedInt32Array(79, 89, 70), PackedInt32Array(70, 89, 88), PackedInt32Array(84, 85, 91), PackedInt32Array(91, 85, 92), PackedInt32Array(48, 49, 93), PackedInt32Array(93, 49, 94), PackedInt32Array(97, 96, 95), PackedInt32Array(93, 94, 96), PackedInt32Array(96, 94, 95), PackedInt32Array(97, 95, 98), PackedInt32Array(98, 95, 100), PackedInt32Array(98, 100, 99), PackedInt32Array(87, 101, 86), PackedInt32Array(86, 101, 102), PackedInt32Array(104, 103, 105), PackedInt32Array(105, 103, 102), PackedInt32Array(102, 101, 105), PackedInt32Array(18, 19, 106), PackedInt32Array(106, 107, 18), PackedInt32Array(18, 107, 108), PackedInt32Array(108, 107, 109), PackedInt32Array(107, 110, 109), PackedInt32Array(113, 112, 111), PackedInt32Array(111, 114, 113), PackedInt32Array(113, 114, 115), PackedInt32Array(115, 114, 92), PackedInt32Array(114, 91, 92), PackedInt32Array(110, 112, 109), PackedInt32Array(109, 112, 113)]
geometry_parsed_geometry_type = 1
cell_size = 0.05
agent_height = 2.0
agent_radius = 0.3

[sub_resource type="BoxShape3D" id="BoxShape3D_f7eko"]
size = Vector3(100, 1, 100)

[sub_resource type="BoxShape3D" id="BoxShape3D_d4tui"]
size = Vector3(10.4284, 0.299805, 12.6703)

[sub_resource type="BoxShape3D" id="BoxShape3D_wxnld"]
size = Vector3(9.92943, 0.299805, 13.7284)

[sub_resource type="BoxShape3D" id="BoxShape3D_7el7o"]
size = Vector3(0.45793, 2.70142, 5.06597)

[sub_resource type="BoxShape3D" id="BoxShape3D_5l63t"]
size = Vector3(0.45793, 2.70142, 6.43826)

[sub_resource type="BoxShape3D" id="BoxShape3D_v41sp"]
size = Vector3(0.405498, 2.70142, 9.92616)

[sub_resource type="BoxShape3D" id="BoxShape3D_xmb1u"]
size = Vector3(0.405498, 2.70142, 13.4763)

[sub_resource type="BoxShape3D" id="BoxShape3D_u08pj"]
size = Vector3(0.405498, 2.70142, 9.92616)

[sub_resource type="BoxShape3D" id="BoxShape3D_6cadt"]
size = Vector3(0.45793, 2.70142, 5.803)

[sub_resource type="BoxShape3D" id="BoxShape3D_2kpul"]
size = Vector3(0.492149, 2.70142, 1.66602)

[sub_resource type="BoxShape3D" id="BoxShape3D_aahse"]
size = Vector3(0.296133, 2.70142, 3.95606)

[sub_resource type="BoxShape3D" id="BoxShape3D_2vsv6"]
size = Vector3(0.731074, 2.70142, 1.52149)

[sub_resource type="BoxShape3D" id="BoxShape3D_oybs4"]
size = Vector3(1.2503, 2.70142, 0.305176)

[sub_resource type="BoxShape3D" id="BoxShape3D_6atdi"]
size = Vector3(1.1525, 2.70142, 0.305176)

[sub_resource type="BoxShape3D" id="BoxShape3D_ox51p"]
size = Vector3(4.23836, 2.70142, 0.32544)

[sub_resource type="BoxShape3D" id="BoxShape3D_nmsrj"]
size = Vector3(1.20205, 2.70142, 0.32544)

[sub_resource type="BoxShape3D" id="BoxShape3D_dkhe0"]
size = Vector3(4.23836, 2.70142, 0.149536)

[sub_resource type="BoxShape3D" id="BoxShape3D_w6iwn"]
size = Vector3(1.20205, 2.70142, 0.174439)

[sub_resource type="BoxShape3D" id="BoxShape3D_ixqyc"]
size = Vector3(1.85562, 2.70142, 0.1521)

[sub_resource type="BoxShape3D" id="BoxShape3D_3f5am"]
size = Vector3(0.521137, 2.70142, 0.125244)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5h5mr"]
no_depth_test = true
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="SphereMesh" id="SphereMesh_hqg7l"]
material = SubResource("StandardMaterial3D_5h5mr")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_x7jw6"]
resource_local_to_scene = true
no_depth_test = true
shading_mode = 0

[node name="Level" type="NavigationRegion3D" groups=["level"]]
navigation_mesh = SubResource("NavigationMesh_82lw1")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="Ground" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.62172, 0)
shape = SubResource("BoxShape3D_f7eko")

[node name="Floor" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.6597, -0.223655, -0.959747)
shape = SubResource("BoxShape3D_d4tui")

[node name="Roof" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.3108, 2.73595, -1.06172)
shape = SubResource("BoxShape3D_wxnld")

[node name="Wall1" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.57634, 1.27769, 3.24561)
shape = SubResource("BoxShape3D_7el7o")

[node name="Wall2" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.57634, 1.27769, -4.47696)
shape = SubResource("BoxShape3D_5l63t")

[node name="Wall3" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -12.3106, 1.27769, -7.4936)
shape = SubResource("BoxShape3D_v41sp")

[node name="Wall4" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(-1, 0, -1.50996e-07, 0, 1, 0, 1.50996e-07, 0, -1, -17.0754, 1.27769, -0.958823)
shape = SubResource("BoxShape3D_xmb1u")

[node name="Wall5" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -12.3106, 1.27769, 5.57937)
shape = SubResource("BoxShape3D_u08pj")

[node name="Wall6" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.8289, 1.27769, 2.8771)
shape = SubResource("BoxShape3D_6cadt")

[node name="Wall7" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.846, 1.27769, -2.52467)
shape = SubResource("BoxShape3D_2kpul")

[node name="Wall8" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.748, 1.27769, -5.32253)
shape = SubResource("BoxShape3D_aahse")

[node name="Wall9" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.4043, 1.27769, -2.7441)
shape = SubResource("BoxShape3D_2vsv6")

[node name="Wall10" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.42317, 1.27769, -2.13368)
shape = SubResource("BoxShape3D_oybs4")

[node name="Wall11" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.5162, 1.27769, -2.13368)
shape = SubResource("BoxShape3D_6atdi")

[node name="Wall12" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.0114, 1.27769, -3.19432)
shape = SubResource("BoxShape3D_ox51p")

[node name="Wall13" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16.6731, 1.27769, -3.19432)
shape = SubResource("BoxShape3D_nmsrj")

[node name="Wall14" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.0114, 1.27769, 1.65723)
shape = SubResource("BoxShape3D_dkhe0")

[node name="Wall15" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16.6731, 1.27769, 1.66968)
shape = SubResource("BoxShape3D_w6iwn")

[node name="Wall16" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.72583, 1.27769, 2.87229)
shape = SubResource("BoxShape3D_ixqyc")

[node name="Wall17" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.7619, 1.27769, 2.88572)
shape = SubResource("BoxShape3D_3f5am")

[node name="level" parent="." instance=ExtResource("1_w1tfj")]

[node name="KinematicFpsController" parent="." instance=ExtResource("2_iewf8")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.54428, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866026, -0.5, 0.75, -0.433013, 0, 5, 0)
directional_shadow_max_distance = 250.0
script = ExtResource("3_miluk")

[node name="Enemy" parent="." instance=ExtResource("4_yfrhx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14.1968, 0.352551, -6.47087)

[node name="RetreatLocations" type="Node" parent="."]

[node name="RetreatLocation1" type="Node3D" parent="RetreatLocations" groups=["retreat_locations"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.656, 0.304049, -6.45216)

[node name="RetreatLocation2" type="Node3D" parent="RetreatLocations" groups=["retreat_locations"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.18136, 0.304049, -6.67343)

[node name="RetreatLocation3" type="Node3D" parent="RetreatLocations" groups=["retreat_locations"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13.1397, 0.304049, 3.38223)

[node name="RetreatLocation4" type="Node3D" parent="RetreatLocations" groups=["retreat_locations"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -9.27971, 0.304049, 4.24274)

[node name="RetreatLocation5" type="Node3D" parent="RetreatLocations" groups=["retreat_locations"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15.9425, 0.304049, 0.726946)

[node name="DebugSphere" type="MeshInstance3D" parent="." groups=["debug_sphere"]]
visible = false
mesh = SubResource("SphereMesh_hqg7l")

[node name="DebugArrow" parent="." groups=["debug_arrow"] instance=ExtResource("5_7b3n7")]
unique_name_in_owner = true
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0)
visible = false
material = SubResource("StandardMaterial3D_x7jw6")
